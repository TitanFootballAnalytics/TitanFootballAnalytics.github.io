<html><head>
<title>Titan Football analytics</title>

  <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Raleway:400,700" rel="stylesheet">


  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/index.css" >
  <link rel="stylesheet" href="css/general.css" >
  <link rel="stylesheet" href="css/loadingbar.css" >

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://d3js.org/topojson.v2.min.js"></script>
  <script src="graphingPackage.js"></script>
  <style>

  line.dashed {
    stroke: #aaa;
    stroke-width: 1px;
    stroke-dasharray: 2;
  }
  text.axis {
    text-anchor: end;
    font-variant: all-small-caps;
  }
  .bar-graph-text{
      text-anchor: end;
  }
  .bar-graph-text2{
      text-anchor: middle;
  }


  </style>
</head>

<body>
    <div class = "container-fluid mainbackground", id = "mainDiv">
    </div>
  <script>
        const fixedHeight = 500
        const fixedWidth = 1200
        const margin = {top:0,bottom:0,left:0,right:0};
        const height = fixedHeight - margin.top - margin.bottom;
        const width = fixedWidth - margin.left - margin.right;


     const requestData = async function(){
            const data = await d3.json("scoreCardAutomation.json");
            console.log(data);
            for(let i = 0; i < data.scorecards.length; i++){
                d3.select("#mainDiv").append("div")
                    .attr("class","row wrapper-div drop")
                    .style("padding-top",function(){
                        if(i==0){
                            return "100px"
                        }
                        else{
                            return "600px"
                        }})
                    .attr("id","div" + i)
                d3.select("#div"+i)
                    .append("svg")
                        .attr("width",fixedWidth)
                        .attr("height",fixedHeight)
                        .attr("class","scorecard centered-basic")
                        .attr("id","scoreCard"+i)
            }
            var svg0 = d3.select("#scoreCard0");
            var svg1 = d3.select("#scoreCard1");
            var svg2 = d3.select("#scoreCard2");

            //how to call the loading bar functions
            //addLoadingBars(svg);
            //removeLoadingBars(svg);z

            var sep = (svg0.attr("width")-30)/5

            var startDex1 = addBarGraph(data.scorecards[0].datasets[0], 0, svg0, 10, svg0.attr("height")*0.40, (10+sep), svg0.attr("height")*0.90,0);
            var startDex2 = addBarGraph(data.scorecards[0].datasets[1], 1, svg0, 10+sep*2, svg0.attr("height")*0.40, 10+sep*3, svg0.attr("height")*0.90,startDex1);
            addBarGraph(data.scorecards[0].datasets[2], 2, svg0, 10+sep*4, svg0.attr("height")*0.40, 10+sep*5, svg0.attr("height")*0.90,startDex2);

            //sankey examples
            addSankey(1, data.scorecards[1].datasets[0], svg0, 2, 10 + sep , svg0.attr("height")*0.40, 10+sep*2, svg0.attr("height")*0.90,true,0,startDex1);
            addSankey(2, data.scorecards[1].datasets[1], svg0, 2, 10 + sep*3 , svg0.attr("height")*0.40, 10+sep*4, svg0.attr("height")*0.90,true,startDex1,startDex2);
            //todo: corner case the above
            addHeader(svg0, data.scorecards[1].datasets[2]);

            addFieldChart(data.scorecards[2].datasets[0],svg2,100,300,400,300);

            colorPallete(svg1);

    }
    requestData();
  </script>

</body>
</html>
