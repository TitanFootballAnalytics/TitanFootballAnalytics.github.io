<html><head>
<title>Titan Football analytics</title>

  <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Raleway:400,700" rel="stylesheet">


  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/scorecards.css" >
  <link rel="stylesheet" href="css/navbar.css" >
  <link rel="stylesheet" href="css/general.css" >
  <link rel="stylesheet" href="css/loadingbar.css" >


  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://d3js.org/topojson.v2.min.js"></script>
  <script src="./js/graphingPackage.js"></script>
  <script src="./js/sortingPackage.js"></script>
  <script src="./js/generalfunctions.js"></script>

  <script src="./js/navBar.js"></script>
  <script src="js/raphael.min.js" crossorigin="anonymous"></script>

  <style>

  line.dashed {
    stroke: #aaa;
    stroke-width: 1px;
    stroke-dasharray: 3;
  }
  text.axis {
    text-anchor: end;
    font-variant: all-small-caps;
  }
  .bar-graph-text{
      text-anchor: end;
  }
  .bar-graph-text2{
      text-anchor: middle;
  }
  .bar-graph-title{
      text-anchor: middle;
  }


  </style>
</head>

<body>
    <div class = "container-fluid mainbackground", id = "backgroundDiv">
    </div>
    <!-- <div class='nav' style='position:fixed;width:100%'>
      <ul>
        <li><a href='#' id = "graph1">Graph 1</a>
            <ul>
              <li><a href='#' id = "baroption1">Bar Graph</a></li>
              <li><a href='#' id = "pieoption1">Pie Chart</a></li>
              <li><a href='#' id = "noneoption1">None</a></li>
            </ul>
        </li>
        <li>
            <a href='#'><input type="checkbox" name="sankey1" value="sankey1" id="sankey1" checked="true">
            <label for="sankey1">Sankey 1</label></a>
        </li>
        <li><a href='#' id = "graph2">Graph 2</a>
            <ul>
                <li><a href='#' id = "baroption2">Bar Graph</a></li>
                <li><a href='#' id = "pieoption2">Pie Chart</a></li>
                <li><a href='#' id = "noneoption2">None</a></li>
            </ul>
        </li>
        <li>
            <a href='#'><input type="checkbox" name="sankey2" value="sankey2" id="sankey2" checked="true">
            <label for="sankey2">Sankey 2</label></a>
        </li>
        <li><a href='#' id = "graph3">Graph 3</a>
            <ul>
                <li><a href='#' id = "baroption3">Bar Graph</a></li>
                <li><a href='#' id = "pieoption3">Pie Chart</a></li>
                <li><a href='#' id = "noneoption3">None</a></li>
            </ul>
        </li>
        <li><a href='#' id="submit">Submit</a></li>
        <li><a href='#' id = "sort">Sort</a>
            <ul>
                <li><a href='#' id = "sortoption1">Down</a></li>
                <li><a href='#' id = "sortoption2">Dist</a></li>
                <li><a href='#' id = "sortoption3">Field Zone</a></li>
                <li><a href='#' id = "sortoption4">NumPlays</a></li>
            </ul>
        </li>
      </ul>
    </div> -->
    <nav  style="margin:0px;" class="navbar navbar-inverse navbar-static-top example6">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar6">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand text-hide" href="index.html">Titan Analytics</a>
        </div>
        <div id="navbar6" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class=""><a href="index.html">Home</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Data <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="upload.html">Upload Data</a></li>
                <li><a href="#">Manage Data</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Data Help</li>
                <li><a href="#">Instruction Guide</a></li>
                <li><a href="#">Contact Us</a></li>
              </ul>
            </li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Reports <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="reportbrowse.html">Browse Reports</a></li>

                <li><a href="customization.html">Create Report</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Report Help</li>
                <li><a href="#">Instruction Guide</a></li>
                <li><a href="#">Contact Us</a></li>
              </ul>
            </li>
            <li><a href="account.html">Account</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a id="SIGNOUT" href="#">Sign Out</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class = "container-fluid", id = "mainDiv">
    </div>

  <script src="js/aws-cognito-sdk.min.js"></script>
  <script src="js/amazon-cognito-identity.min.js"></script>
  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.721.0.min.js"></script>
  <script src="js/cognito-config.js"></script>
  <script src="js/auth.js"></script>
  <script>


        const fixedHeight = 500
        const fixedWidth = 1200
        const margin = {top:0,bottom:0,left:0,right:0};
        const height = fixedHeight - margin.top - margin.bottom;
        const width = fixedWidth - margin.left - margin.right;


        // function getUrlVars() {
        //     var vars = {};
        //     var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        //         vars[key] = value;
        //     });
        //     return vars;
        // }
        //
        // function getUrlParam(parameter, defaultvalue){
        //     var urlparameter = defaultvalue;
        //     if(window.location.href.indexOf(parameter) > -1){
        //         urlparameter = getUrlVars()[parameter];
        //         }
        //     return urlparameter;
        // }


        var reportid = getUrlParam("reportid","empty");
        if(reportid == "empty"){
          console.log("Please select scorecards from browse report page");
        }
        else{
          authAndRun((team)=>{
            var key = `${team}/reports/${reportid}/report_${team}_${reportid}.json`;
            getObjAndRun("titancommonstorage",key,(config)=>{
              key = `${team}/reports/${reportid}/data_${team}_${reportid}.json`;
              getObjAndRun("titancommonstorage",key,(report)=>{
                console.log(report)
                console.log(config)
                console.log(team)
                //TODO iterate over multiple reports rather than just present the first

                generateScorecards(report,config,["numplays"]);
              });
            });
          });
        }

        // generateScorecards("scoreCardAutomation.json",["NumPlays"])
        // setupNavClicks();


  </script>

</body>
</html>
