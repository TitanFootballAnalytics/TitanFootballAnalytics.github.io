<html><head>
<title>Titan Football analytics</title>

  <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Raleway:400,700" rel="stylesheet">


  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/index.css" >
  <link rel="stylesheet" href="css/general.css" >
  <link rel="stylesheet" href="css/loadingbar.css" >

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://d3js.org/topojson.v2.min.js"></script>
  <script src="graphingPackage.js"></script>
  <style>

  line.dashed {
    stroke: #aaa;
    stroke-width: 1px;
    stroke-dasharray: 2;
  }
  text.axis {
    text-anchor: end;
    font-variant: all-small-caps;
  }
  .bar-graph-text{
      text-anchor: end;
  }
  .bar-graph-text2{
      text-anchor: middle;
  }


  </style>
</head>

<body>
    <div class = "container-fluid mainbackground", id = "mainDiv">
    </div>
  <script>
        const fixedHeight = 500
        const fixedWidth = 1200
        const margin = {top:0,bottom:0,left:0,right:0};
        const height = fixedHeight - margin.top - margin.bottom;
        const width = fixedWidth - margin.left - margin.right;


     const requestData = async function(){
            const data = await d3.json("scoreCardAutomation.json");
            // /console.log(data);
            var svg;
            var sep;
            var startDex1;
            var startDex2;
            for(let i = 0; i < data.scorecards.length; i++){
                d3.select("#mainDiv").append("div")
                    .attr("class","row wrapper-div drop")
                    .style("padding-top",function(){
                        if(i==0){
                            return "100px"
                        }
                        else{
                            return "600px"
                        }})
                    .attr("id","div" + i)
                d3.select("#div"+i)
                    .append("svg")
                        .attr("width",fixedWidth)
                        .attr("height",fixedHeight)
                        .attr("class","scorecard centered-basic")
                        .attr("id","scoreCard"+i)
                svg = d3.select(("#scoreCard"+i));
                sep = (svg.attr("width")-30)/5;
                startDex1 = addBarGraph(data.scorecards[i].colAData, 0, svg, 10, svg.attr("height")*0.40, (10+sep), svg.attr("height")*0.90,0);
                startDex2 = addBarGraph(data.scorecards[i].colBData, 1, svg, 10+sep*2, svg.attr("height")*0.40, 10+sep*3, svg.attr("height")*0.90,startDex1);
                addBarGraph(data.scorecards[i].colCData, 2, svg, 10+sep*4, svg.attr("height")*0.40, 10+sep*5, svg.attr("height")*0.90,startDex2);

                //sankey examples
                addSankey(""+i+""+1, data.scorecards[i].colABData, svg, 2, 10 + sep , svg.attr("height")*0.40, 10+sep*2, svg.attr("height")*0.90,true,0,startDex1);
                addSankey(""+i+""+2, data.scorecards[i].colBCData, svg, 2, 10 + sep*3 , svg.attr("height")*0.40, 10+sep*4, svg.attr("height")*0.90,true,startDex1,startDex2);
                addHeader(svg, data.scorecards[i].aggregateData,data.scorecards[i].situation);
                // var sample_data = [{type:"run",start:10,end:15},
                //             {type:"run",start:15,end:14},
                //             {type:"pass",start:14,end:20},
                //             {type:"pass",start:20,end:40},
                //             {type:"run",start:40,end:43}
                //           ]
                // addFieldChart(sample_data, svg, 100, 100, 100, 100)

            }


    }
    requestData();
  </script>

</body>
</html>
